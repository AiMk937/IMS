<%- include('../layout/header', { title: 'Edit Item' }) %>

<div class="container my-5">
  <header class="text-center mb-4">
    <h1 class="text-primary">Edit Item</h1>
    <a href="/items" class="btn btn-secondary mt-3">Back to Inventory List</a>
  </header>

  <form action="/items/edit/<%= item._id %>" method="POST" enctype="multipart/form-data" class="row g-4 bg-light p-4 shadow rounded">
    <div class="col-md-6">
      <label for="name" class="form-label">Name:</label>
      <input type="text" id="name" name="name" class="form-control" value="<%= item.name %>" required>
    </div>
    <div class="col-md-6">
      <label for="sku" class="form-label">SKU:</label>
      <input type="text" id="sku" name="sku" class="form-control" value="<%= item.sku %>">
    </div>
    <div class="col-md-12">
      <label for="description" class="form-label">Description:</label>
      <textarea id="description" name="description" class="form-control" rows="3" required><%= item.description %></textarea>
    </div>
    <div class="col-md-4">
      <label for="costPrice" class="form-label">Cost Price:</label>
      <input type="number" id="costPrice" name="costPrice" class="form-control" value="<%= item.costPrice %>" required>
    </div>
    <div class="col-md-4">
      <label for="sellingPrice" class="form-label">Selling Price:</label>
      <input type="number" id="sellingPrice" name="sellingPrice" class="form-control" value="<%= item.sellingPrice %>" required>
    </div>
    <div class="col-md-4">
      <label for="quantity" class="form-label">Quantity:</label>
      <input type="number" id="quantity" name="quantity" class="form-control" value="<%= item.quantity %>" required>
    </div>
    <div class="col-md-6">
      <label for="category" class="form-label">Category:</label>
      <select id="category" name="category" class="form-control" required>
        <option value="">Select Category</option>
        <% categories.forEach(category => { %>
          <option value="<%= category %>"><%= category %></option>
        <% }) %>
      </select>
    </div>
    <div class="col-md-6">
      <label for="reorderLevel" class="form-label">Reorder Level:</label>
      <input type="number" id="reorderLevel" name="reorderLevel" class="form-control" value="<%= item.reorderLevel %>">
    </div>
    <div class="col-md-12">
      <label for="image" class="form-label">Image:</label>
      <input type="file" id="image" name="image" class="form-control" accept="image/*">
      <% if (item.imageBase64) { %>
        <img src="<%= item.imageBase64 %>" alt="Item Image" class="img-thumbnail mt-3" style="width: 150px;">
      <% } %>
    </div>
    <div class="col-12 text-center">
      <button type="submit" class="btn btn-primary px-4 py-2">Update Item</button>
    </div>
  </form>
</div>

<%- include('../layout/footer') %>
